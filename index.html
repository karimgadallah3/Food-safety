<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุฏุงุฑุฉ ุชูููุฏ ุงูุฌูุฏุฉ</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginPage" class="page">
        <div class="container">
            <div class="card login-card">
                <div class="brand-header">
                    <div class="brand-logo-img" onclick="showSurvey()" style="cursor: pointer;">
                        <img src="https://i.ibb.co/j9BqHXhB/Logo-11.png" alt="ุฌูู ูุฑูุด" class="company-logo">
                    </div>
                    <p class="brand-tagline"><span class="company-name">ุดุฑูุฉ ุฌูู ูุฑูุด</span></p>
                </div>
                <div class="header-logo">
                    <h1 class="main-title">ุชุณุฌูู ุงูุฏุฎูู</h1>
                    <p class="subtitle">ููุญุฉ ุชุญูู ุงููุณุคูู</p>
                </div>
                <form onsubmit="performLogin(event)">
                    <div class="form-group">
                        <label>ุงุณู ุงููุณุชุฎุฏู</label>
                        <input type="text" id="username" class="input" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู" required>
                    </div>
                    <div class="form-group">
                        <label>ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="password" class="input" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ" required>
                    </div>
                    <button type="submit" class="btn btn-submit">
                        ๐ ุฏุฎูู
                    </button>
                </form>
                <button onclick="showSurvey()" class="btn btn-back" style="margin-top: 20px; width: 100%;">
                    โ ุงูุนูุฏุฉ ููุงุณุชุจูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- ุตูุญุฉ ููุญุฉ ุงูุชุญูู -->
    <div id="adminPage" class="page">
        <div class="container">
            <div class="card">
                <div class="brand-header">
                    <div class="brand-logo-img" onclick="showSurvey()" style="cursor: pointer;">
                        <img src="https://i.ibb.co/j9BqHXhB/Logo-11.png" alt="ุฌูู ูุฑูุด" class="company-logo">
                    </div>
                    <p class="brand-tagline"><span class="company-name">ุดุฑูุฉ ุฌูู ูุฑูุด</span></p>
                </div>
                <h1 class="main-title">ููุญุฉ ุชุญูู ุงุณุชุจูุงู ุณูุงูุฉ ุงูุบุฐุงุก</h1>
                <p class="subtitle">ุดุฑูุฉ ุฌูู ูุฑูุด</p>

                <div class="section">
                    <h2 class="section-title">ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏ</h2>
                    <textarea id="newQuestion" class="textarea" rows="3" placeholder="ุงูุชุจ ุงูุณุคุงู ููุง..."></textarea>
                    <button onclick="addQuestion(event)" class="btn btn-primary">
                        โ ุฅุถุงูุฉ ุงูุณุคุงู
                    </button>
                </div>

                <div class="section">
                    <h2 class="section-title">ุงูุฃุณุฆูุฉ ุงูุญุงููุฉ (<span id="questionCount">0</span>)</h2>
                    <div id="questionsList" class="questions-list"></div>
                </div>

                <div class="actions">
                    <button onclick="logout()" class="btn btn-danger" style="background: #e53e3e;">
                        ๐ช ุชุณุฌูู ุงูุฎุฑูุฌ
                    </button>
                    <button onclick="showSurvey()" class="btn btn-success">
                        ๐ ูุนุงููุฉ ุงูุงุณุชุจูุงู
                    </button>
                    <button onclick="showResults()" class="btn btn-info">
                        ๐ ุนุฑุถ ุงููุชุงุฆุฌ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงูุงุณุชุจูุงู -->
    <div id="surveyPage" class="page">
        <div class="container">
            <div class="card">
                <div class="brand-header">
                    <div class="brand-logo-img" onclick="showSurvey()" style="cursor: pointer;">
                        <img src="https://i.ibb.co/j9BqHXhB/Logo-11.png" alt="ุฌูู ูุฑูุด" class="company-logo">
                    </div>
                    <p class="brand-tagline"><span class="company-name">ุดุฑูุฉ ุฌูู ูุฑูุด</span></p>
                </div>
                <div class="header-logo">
                    <h1 class="main-title">ุงุณุชุจูุงู ุซูุงูุฉ ุณูุงูุฉ ุงูุบุฐุงุก</h1>
                    <p class="subtitle">ุฅุฏุงุฑุฉ ุชูููุฏ ุงูุฌูุฏุฉ</p>
                </div>

                <form id="surveyForm" onsubmit="submitSurvey(event)">
                    <div class="employee-info">
                        <h2 class="section-title">ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ</h2>
                        <input type="text" id="employeeName" class="input" placeholder="ุงุณู ุงูููุธู" required>
                        <select id="department" class="input" required>
                            <option value="" disabled selected>ุงุฎุชุฑ ุงููุณู</option>
                            <option value="ุงูุฅุฏุงุฑุฉ">ุงูุฅุฏุงุฑุฉ</option>
                            <option value="ูุฑุงูุจุฉ ุงูุฌูุฏุฉ">ูุฑุงูุจุฉ ุงูุฌูุฏุฉ</option>
                            <option value="ุงููุฑุฒ ูุงูุชุนุจุฆุฉ">ุงููุฑุฒ ูุงูุชุนุจุฆุฉ</option>
                            <option value="ุงูุฃูู">ุงูุฃูู</option>
                            <option value="ุงูุตูุงูุฉ">ุงูุตูุงูุฉ</option>
                            <option value="ุงููุซุงุฆู ูุงูุณุฌูุงุช">ุงููุซุงุฆู ูุงูุณุฌูุงุช</option>
                            <option value="ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ">ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ</option>
                            <option value="ุงููุฎุงุฒู">ุงููุฎุงุฒู</option>
                            <option value="ุงุณุชูุงู ุงูุฎุงู">ุงุณุชูุงู ุงูุฎุงู</option>
                            <option value="ุงูุซูุงุฌุงุช">ุงูุซูุงุฌุงุช</option>
                            <option value="ููุงูุญุฉ ุงูุขูุงุช">ููุงูุญุฉ ุงูุขูุงุช</option>
                            <option value="ุงููุธุงูุฉ ูุงูุชุทููุฑ">ุงููุธุงูุฉ ูุงูุชุทููุฑ</option>
                        </select>
                    </div>

                    <div id="surveyQuestions" class="survey-questions"></div>

                    <button type="submit" class="btn btn-submit">
                        โ ุฅุฑุณุงู ุงูุฅุฌุงุจุงุช
                    </button>
                </form>

                <div id="successMessage" class="success-message hidden">
                    <div class="success-icon">โ</div>
                    <p class="success-text">ุชู ุฅุฑุณุงู ุฅุฌุงุจุงุชู ุจูุฌุงุญ!</p>
                    <p class="success-subtext">ุดูุฑุงู ููุดุงุฑูุชู ูู ุชุญุณูู ุซูุงูุฉ ุชูููุฏ ุงูุฌูุฏุฉ</p>
                    <button onclick="resetSurvey()" class="btn btn-secondary">
                        ุฅุฌุงุจุฉ ุฌุฏูุฏุฉ
                    </button>
                </div>

                <button onclick="showLogin()" class="btn btn-back">
                    ๐ ุชุณุฌูู ุฏุฎูู ูุณุคูู
                </button>
            </div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงููุชุงุฆุฌ -->
    <div id="resultsPage" class="page">
        <div class="container-wide">
            <div class="card">
                <div class="brand-header">
                    <div class="brand-logo-img" onclick="showSurvey()" style="cursor: pointer;">
                        <img src="https://i.ibb.co/j9BqHXhB/Logo-11.png" alt="ุฌูู ูุฑูุด" class="company-logo">
                    </div>
                    <p class="brand-tagline"><span class="company-name">ุดุฑูุฉ ุฌูู ูุฑูุด</span></p>
                </div>
                <div class="results-header">
                    <h1 class="main-title">ูุชุงุฆุฌ ุงุณุชุจูุงู ุณูุงูุฉ ุงูุบุฐุงุก</h1>
                    <div class="header-actions">
                        <button onclick="exportToExcel()" class="btn btn-success">
                            ๐ฅ ุชุตุฏูุฑ Excel
                        </button>
                        <button onclick="clearAllData()" class="btn btn-danger">
                            ๐๏ธ ุญุฐู ุงูุจูุงูุงุช
                        </button>
                        <button onclick="showAdmin()" class="btn btn-back">
                            โ ุฑุฌูุน
                        </button>
                    </div>
                </div>

                <div id="statsContainer" class="stats-grid"></div>

                <div class="table-container">
                    <table id="resultsTable" class="results-table">
                        <thead>
                            <tr>
                                <th>ุงุณู ุงูููุธู</th>
                                <th>ุงููุณู</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="resultsBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <!-- Firebase Integration -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, orderBy, Timestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB1HacNWwRezOQp9Pl_c9XdpwkL4R29wV0",
            authDomain: "jana-food-safety.firebaseapp.com",
            projectId: "jana-food-safety",
            storageBucket: "jana-food-safety.firebasestorage.app",
            messagingSenderId: "1067422844886",
            appId: "1:1067422844886:web:549e8a8142a827bf5cc677"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Make functions globally available for scripts.js
        window.firebaseDb = db;
        window.firebaseCollection = collection;
        window.firebaseAddDoc = addDoc;
        window.firebaseGetDocs = getDocs;
        window.firebaseDeleteDoc = deleteDoc;
        window.firebaseDoc = doc;
        window.firebaseQuery = query;
        window.firebaseOrderBy = orderBy;
        window.firebaseTimestamp = Timestamp;

        console.log("Firebase Initialized Successfully");
    </script>

    <script src="scripts.js"></script>
</body>

</html>